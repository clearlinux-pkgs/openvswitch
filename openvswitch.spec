#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
Name     : openvswitch
Version  : 2.11.0
Release  : 56
URL      : https://www.openvswitch.org/releases/openvswitch-2.11.0.tar.gz
Source0  : https://www.openvswitch.org/releases/openvswitch-2.11.0.tar.gz
Source1  : openvswitch.service
Summary  : Open vSwitch Kernel Modules
Group    : Development/Tools
License  : Apache-2.0 GPL-2.0 LGPL-2.1 LGPL-2.1+ SISSL
Requires: sortedcontainers
BuildRequires : buildreq-distutils3
BuildRequires : deprecated-six-legacypython
BuildRequires : groff
BuildRequires : libc-bin
BuildRequires : libcap-ng-dev
BuildRequires : python3-dev
BuildRequires : six
BuildRequires : sortedcontainers

%description
Open vSwitch provides standard network bridging functions augmented with
support for the OpenFlow protocol for remote per-flow control of
traffic. This package contains the kernel modules.

%prep
%setup -q -n openvswitch-2.11.0

%build
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C
export SOURCE_DATE_EPOCH=1554426593
unset LD_AS_NEEDED
export LDFLAGS="${LDFLAGS} -fno-lto"
export CFLAGS="$CFLAGS -fstack-protector-strong -mzero-caller-saved-regs=used "
export FCFLAGS="$CFLAGS -fstack-protector-strong -mzero-caller-saved-regs=used "
export FFLAGS="$CFLAGS -fstack-protector-strong -mzero-caller-saved-regs=used "
export CXXFLAGS="$CXXFLAGS -fstack-protector-strong -mzero-caller-saved-regs=used "
%configure --disable-static PYTHON=/usr/bin/python2
make  %{?_smp_mflags}

%install
export SOURCE_DATE_EPOCH=1554426593
rm -rf %{buildroot}
mkdir -p %{buildroot}/usr/share/package-licenses/openvswitch
cp LICENSE %{buildroot}/usr/share/package-licenses/openvswitch/LICENSE
cp NOTICE %{buildroot}/usr/share/package-licenses/openvswitch/NOTICE
cp python/ovs/compat/sortedcontainers/LICENSE %{buildroot}/usr/share/package-licenses/openvswitch/python_ovs_compat_sortedcontainers_LICENSE
cp xenserver/LICENSE %{buildroot}/usr/share/package-licenses/openvswitch/xenserver_LICENSE
%make_install
mkdir -p %{buildroot}/usr/lib/systemd/system
install -m 0644 %{SOURCE1} %{buildroot}/usr/lib/systemd/system/openvswitch.service

%files
%defattr(-,root,root,-)
